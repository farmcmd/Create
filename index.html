<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ°´é‡Œæ°¸çºŒå…±å¥½è¯ç›Ÿ â€“ å±±æ‘æ°¸çºŒæ—…éŠ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Maps API -->
    <!-- ä¿ç•™ onerror ä»¥è™•ç†ç¶²è·¯é˜»æ“‹æˆ– API è¼‰å…¥å¤±æ•—çš„æƒ…æ³ -->
    <script async defer 
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAwNfK9p-tYV9iR7OGjr0um8ZvJ9Hr49cM&libraries=geometry,routes&callback=initMap"
        onerror="window.mapScriptLoadError()">
    </script>

    <!-- å…§åµŒ CSS (åŸ style.css) -->
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            line-height: 1.6;
        }

        .page-section {
            display: none; /* Hidden by default */
        }

        .page-section.block {
            display: block; /* Shown when active */
        }

        /* Custom styles for map container */
        #map {
            height: 500px; /* Adjust height as needed */
            min-height: 300px; /* Ensure a minimum height on smaller screens */
            width: 100%;
            border-radius: 0.5rem; /* Rounded corners */
            z-index: 1; /* Ensure map is below modals */
            background-color: #e5e7eb; /* Fallback color */
            position: relative;
        }

        /* Style for modals */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7); /* Dim background */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000; /* Ensure modal is on top */
            padding: 1rem; /* Add padding for smaller screens */
        }

        .modal-content {
            background-color: #fff;
            padding: 20px; /* Default padding */
            border-radius: 10px;
            width: 100%; /* Full width on small screens */
            max-width: 90%; /* Max width for responsiveness */
            max-height: 90vh; /* Max height relative to viewport */
            overflow-y: auto; /* Enable scrolling if content overflows */
            position: relative;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        /* Adjust padding for larger screens */
        @media (min-width: 640px) { /* sm breakpoint */
            .modal-content {
                padding: 30px;
                max-width: 600px; /* Example max-width for larger modals */
            }
        }

        .modal-content .close-button {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
            color: #aaa;
            line-height: 1; /* Ensure proper alignment */
        }

        .modal-content .close-button:hover {
            color: #777;
        }

        /* Style for clickable list items */
        .clickable-list-item {
            cursor: pointer;
            padding: 10px;
            border-bottom: 1px solid #eee;
            display: flex; /* Use flexbox for layout */
            justify-content: space-between; /* Space out text and icons */
            align-items: center; /* Vertically align items */
        }

        .clickable-list-item:last-child {
            border-bottom: none;
        }

        .clickable-list-item:hover {
            background-color: #f5f5f5;
        }

        /* Style for selected transport option */
        .transport-option.selected,
        #market-mileage-button.selected { /* Added for market button if needed */
            background-color: #a5d6a7; /* Lighter green */
            border: 2px solid #388e3c; /* Darker green border */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        /* Style for selected sustainable action item */
        .selectable-action-item {
            cursor: pointer;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin-bottom: 5px;
            background-color: #fff;
            transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out;
        }

        .selectable-action-item:hover {
            background-color: #e0e0e0;
        }

        .selectable-action-item.selected {
            background-color: #a5d6a7; /* Lighter green */
            border-color: #388e3c; /* Darker green */
            font-weight: bold;
        }

        /* Style for logged action items */
        .action-log-item {
            background-color: #e8f5e9; /* Very light green */
            padding: 12px; /* Increased padding */
            border-radius: 6px; /* Slightly more rounded */
            margin-bottom: 12px; /* Increased margin */
            border-left: 5px solid #4caf50; /* Green left border, slightly thicker */
            box-shadow: 0 1px 3px rgba(0,0,0,0.05); /* Subtle shadow */
        }

        .action-log-item p {
            margin-bottom: 6px; /* Adjusted margin */
        }

        .action-log-item p:last-child {
            margin-bottom: 0;
        }

        .action-log-item .log-type {
            font-weight: bold;
            color: #1b5e20; /* Dark green */
            margin-bottom: 6px; /* Adjusted margin */
            font-size: 0.95em; /* Slightly adjusted font size */
        }

        .action-log-item .timestamp {
            font-size: 0.8em;
            color: #757575; /* Gray */
            text-align: right;
            margin-top: 8px; /* Increased margin */
        }
        .action-log-item .log-points {
            font-weight: bold;
            color: #2e7d32; /* Slightly different green for points */
            font-size: 0.9em;
        }

        /* Style for selected activity item in the list */
        .activity-list-item.selected-activity-item {
             background-color: #bbdefb; /* Light blue */
             border: 1px solid #2196f3; /* Blue border */
             font-weight: bold;
         }

         /* Style for the icon group in list items */
         .icon-group {
             display: flex;
             align-items: center;
             gap: 10px; /* Space between icons */
         }

         .icon-group .social-icon,
         .icon-group .navigation-icon,
         .icon-group .log-trip-icon {
             color: #4a5568; /* Tailwind gray-700 */
             font-size: 1.1em;
             transition: color 0.2s ease-in-out;
         }

         .icon-group .social-icon:hover {
             color: #3b82f6; /* Tailwind blue-500 */
         }

         .icon-group .navigation-icon:hover {
              color: #10b981; /* Tailwind emerald-500 */
         }

         .icon-group .log-trip-icon:hover {
              color: #f97316; /* Tailwind orange-500 */
         }

         /* Style for the NEW indicator */
         .new-indicator {
             animation: pulse-subtle 2s infinite ease-in-out;
         }

         @keyframes pulse-subtle {
             0%, 100% { opacity: 1; }
             50% { opacity: 0.6; }
         }

         /* Animation for the tip text */
         .animate-pulse-subtle {
            animation: pulse-subtle 4s infinite ease-in-out;
         }

         /* Styles for the new Market Selection Modal */
        .market-option-button, .product-option-button {
            /* Base styles are applied via Tailwind, this is for custom states or overrides */
            transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out, transform 0.1s ease-in-out;
        }

        .market-option-button.selected, .product-option-button.selected {
            background-color: #c9b2ec !important; /* A lighter purple */
            border-color: #805ad5 !important; /* Tailwind purple-600 */
            color: #44337a !important; /* Darker purple text for contrast */
            font-weight: bold;
            transform: scale(1.02); /* Slight scale effect */
        }
        /* Ensure Tailwind's focus rings are visible if needed, or add custom focus */
        .market-option-button:focus, .product-option-button:focus {
            outline: 2px solid #9f7aea; /* Tailwind purple-500 focus outline */
            outline-offset: 2px;
        }

        /* Styling for POI list item highlights */
        .poi-list-item-start {
            background-color: #fffde7 !important; /* Light yellow for start */
            border-left: 4px solid #fbc02d !important; /* Yellow border */
        }

        .poi-list-item-end {
            background-color: #e8f5e9 !important; /* Light green for end */
            border-left: 4px solid #4caf50 !important; /* Green border */
        }

        /* Styling for Log Trip Modal transport buttons */
        .log-trip-transport-button.selected {
            background-color: #fdba74 !important; /* Tailwind orange-300 */
            border-color: #f97316 !important; /* Tailwind orange-600 */
            color: #7c2d12 !important; /* Tailwind orange-900 */
            font-weight: bold;
        }

        /* Green Consumption Modal Styles */
        .green-calc-section {
            border: 1px solid #e5e7eb;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            background-color: #f9fafb;
        }

        .hidden { display: none !important; }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 font-sans">

    <header class="bg-green-700 text-white p-6 text-center shadow-md relative">
        <h1 class="text-3xl font-bold">æ°¸çºŒæ—…éŠç©åˆ†ç¶²ç«™</h1>
        <p class="mt-2 text-lg">ç”¨ä½ç¢³æ°¸çºŒçš„æ–¹å¼æ¢ç´¢ç¾éº—çš„å—æŠ•è¾²åº„</p>
        
        <!-- å³å´åŠŸèƒ½æŒ‰éˆ• -->
        <div class="mt-4 md:mt-0 md:absolute md:top-1/2 md:right-6 md:-translate-y-1/2 flex gap-3 justify-center">
            <button id="enterprise-version-btn" class="px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white text-sm font-bold rounded shadow transition duration-300">
                <i class="fas fa-building mr-1"></i> ä¼æ¥­ç‰ˆ
            </button>
            <button id="gov-version-btn" class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white text-sm font-bold rounded shadow transition duration-300">
                <i class="fas fa-landmark mr-1"></i> æ°¸çºŒæ”¿åºœ
            </button>
        </div>
    </header>

    <main class="container mx-auto p-6 mt-8">

        <section id="homepage" class="page-section block bg-white p-6 rounded-lg shadow-lg">

            <div class="bg-green-50 p-4 rounded-lg shadow-inner mb-6">
                <h3 class="text-2xl font-semibold mb-4 text-green-700 text-center">æ‚¨çš„å€‹äººæ—…éŠæ•¸æ“š</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div class="p-4 bg-white rounded-md shadow-sm border border-green-200">
                        <label for="player-name" class="block text-sm font-medium text-gray-700 mb-1">æ°¸çºŒæ—…è€…å§“å:</label>
                        <input type="text" id="player-name" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring focus:ring-green-200 focus:ring-opacity-50 text-center text-base p-2" placeholder="è«‹è¼¸å…¥æ‚¨çš„å§“å">
                    </div>
                    <div class="p-4 bg-white rounded-md shadow-sm border border-green-200 text-center flex flex-col justify-center">
                        <p class="text-sm font-medium text-gray-700">æ°¸çºŒæ—…è€…æˆ–é›†åœ˜ä¼æ¥­å“¡å·¥éš¨æ©Ÿç¢¼:</p>
                        <p id="player-code" class="mt-1 text-2xl font-bold text-green-600">ç”Ÿæˆä¸­...</p>
                    </div>
                </div>
                <p id="stats-load-status" class="text-sm text-gray-600 mb-4 text-center">å·²è‡ªå‹•è¼‰å…¥ä¹‹å‰çš„æ—…éŠæ•¸æ“š...</p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                    <div class="p-4 bg-white rounded-md shadow-sm border border-green-200">
                        <p class="text-sm font-medium text-gray-700">å€‹äººç´¯è¨ˆé‡Œç¨‹</p>
                        <p id="total-mileage" class="text-2xl font-bold text-green-600">0 km</p>
                    </div>
                    <div class="p-4 bg-white rounded-md shadow-sm border border-green-200">
                        <p class="text-sm font-medium text-gray-700">å€‹äººæ¸›ç¢³ç¸½é‡</p>
                        <p id="total-carbon-reduction" class="text-2xl font-bold text-green-600">0 g</p>
                    </div>
                    <div class="p-4 bg-white rounded-md shadow-sm border border-green-200">
                        <p class="text-sm font-medium text-gray-700">æ°¸çºŒåˆ†æ•¸</p>
                        <p id="total-score" class="text-2xl font-bold text-green-600">0</p>
                    </div>
                </div>
            </div>

            <!-- ç¶ è‰²æ¶ˆè²»è©•é‘‘æ•¸æ“šå€å¡Š -->
            <div class="bg-emerald-50 p-6 rounded-lg shadow-inner mb-6 border border-emerald-200">
                <div class="flex flex-col md:flex-row justify-between items-center mb-4">
                     <h3 class="text-2xl font-semibold text-emerald-800 text-center md:text-left"><i class="fas fa-leaf mr-2"></i>ç¶ è‰²æ¶ˆè²»è©•é‘‘æ•¸æ“š</h3>
                     <button id="open-green-eval-btn" class="mt-3 md:mt-0 px-6 py-2 bg-emerald-600 text-white font-bold rounded-full shadow hover:bg-emerald-700 transition duration-300 animate-pulse">
                        <i class="fas fa-calculator mr-2"></i>é–‹å•Ÿè©•é‘‘è¨ˆç®—
                     </button>
                </div>
               
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-center">
                    <div class="p-3 bg-white rounded-md shadow-sm border border-emerald-100">
                        <p class="text-xs font-medium text-gray-600">å€‹äºº-ç¶ è‰²æ¡è³¼ç¸½é¡</p>
                        <p id="display-green-procurement" class="text-xl font-bold text-emerald-600">$0</p>
                    </div>
                    <div class="p-3 bg-white rounded-md shadow-sm border border-emerald-100">
                        <p class="text-xs font-medium text-gray-600">å€‹äºº-SROI ç¤¾æœƒæŠ•è³‡å ±é…¬</p>
                        <p id="display-sroi-procurement" class="text-xl font-bold text-emerald-600">$0</p>
                    </div>
                    <div class="p-3 bg-white rounded-md shadow-sm border border-emerald-100">
                        <p class="text-xs font-medium text-gray-600">å€‹äºº-å°ˆæ¡ˆæ¡è³¼ç¸½é¡</p>
                        <p id="display-project-procurement" class="text-xl font-bold text-emerald-600">$0</p>
                    </div>
                    <!-- å…¨ç¶²ç´¯ç©æ•¸æ“šé¡¯ç¤ºå€ -->
                    <div class="p-3 bg-emerald-100 rounded-md shadow-sm border border-emerald-300 relative overflow-hidden">
                        <p class="text-xs font-bold text-emerald-800">å…¨ç¶²ç´¯è¨ˆç¶ è‰²æ¶ˆè²»ç¸½é¡</p>
                        <p id="display-grand-total-green" class="text-2xl font-bold text-emerald-800 my-1">é€£ç·šä¸­...</p>
                        <p class="text-[10px] text-emerald-700">ç´¯ç©éŸ¿æ‡‰æ¬¡æ•¸: <span id="global-green-trans-count">0</span> æ¬¡</p>
                        <div class="absolute top-0 right-0 p-1">
                            <i class="fas fa-globe-asia text-emerald-200 text-3xl opacity-50"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å…¨ç¶²ç´¯ç©æ¸›ç¢³å€å¡Š -->
            <div class="bg-blue-50 p-4 rounded-lg shadow-inner mb-6 relative overflow-hidden">
                 <h3 class="text-2xl font-semibold mb-4 text-blue-700 text-center">
                     ç´¯è¨ˆæ¸›ç¢³é‡ç¸½é‡ (å…¨æ°‘æ¸›ç¢³ç‰ˆ)
                     <span class="block text-sm font-normal mt-1">è¨»:è‡ªç™¼å¸ƒæ—¥2025å¹´3æœˆ21æ—¥èµ·ç´¯è¨ˆ</span>
                 </h3>
                 <div class="text-center relative z-10">
                     <p id="network-total-carbon-reduction" class="mt-1 text-3xl font-bold text-blue-600">é€£ç·šä¸­...</p>
                     <div id="trees-planted-display" class="mt-3 text-green-700">
                         <span class="text-4xl">ğŸŒ³</span>
                         <p class="text-xl font-bold">å·²ç´¯ç© <span id="trees-planted-count">0</span> æ£µæ¨¹</p>
                         <p class="text-xs text-gray-600 mt-1">(æ¯æ¸›ç¢³10å…¬æ–¤ï¼Œæˆ‘å€‘å°‡å¯¦éš›ç¨®æ¤ä¸€æ£µæ¨¹)</p>
                     </div>
                     <p id="network-stats-status" class="text-xs text-gray-600 mt-2">æ­£åœ¨åŒæ­¥é›²ç«¯æ•¸æ“š...</p>
                 </div>
                 <div class="absolute top-2 right-4 opacity-10">
                     <i class="fas fa-cloud text-9xl text-blue-300"></i>
                 </div>
            </div>

            <h2 class="text-2xl font-semibold mb-6 text-green-800 text-center">é¸æ“‡ä½ç¢³äº¤é€šæ–¹å¼é–‹å§‹æ‚¨çš„æ°¸çºŒæ—…éŠ</h2>
            <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6 mb-8">
                <!-- äº¤é€šæŒ‰éˆ• -->
                <button class="transport-option flex flex-col items-center p-5 bg-green-100 rounded-lg shadow hover:bg-green-200 transition-all duration-300 ease-in-out" data-transport="bike" data-carbon-reduction="350">
                    <span class="text-3xl mb-3">ğŸš²</span>
                    <span class="font-semibold text-center text-sm">è…³è¸è»Š</span>
                    <span class="text-xs text-gray-600 mt-2 text-center">æ¸›ç¢³: 350g/10km</span>
                </button>
                <button class="transport-option flex flex-col items-center p-5 bg-green-100 rounded-lg shadow hover:bg-green-200 transition-all duration-300 ease-in-out" data-transport="walk" data-carbon-reduction="400">
                    <span class="text-3xl mb-3">ğŸš¶â€â™‚ï¸</span>
                    <span class="font-semibold text-center text-sm">æ­¥è¡Œ</span>
                    <span class="text-xs text-gray-600 mt-2 text-center">æ¸›ç¢³: 400g/10km</span>
                </button>
                <button class="transport-option flex flex-col items-center p-5 bg-green-100 rounded-lg shadow hover:bg-green-200 transition-all duration-300 ease-in-out" data-transport="bus_train" data-carbon-reduction="300">
                    <span class="text-3xl mb-3">ğŸšŒ</span>
                    <span class="font-semibold text-center text-sm">å…±ä¹˜å·´å£«</span>
                    <span class="text-xs text-gray-600 mt-2 text-center">æ¸›ç¢³: 300g/äºº/10km</span>
                </button>
                <button class="transport-option flex flex-col items-center p-5 bg-green-100 rounded-lg shadow hover:bg-green-200 transition-all duration-300 ease-in-out" data-transport="carpool_2_moto" data-carbon-reduction="100">
                    <span class="text-3xl mb-3">ğŸï¸ğŸš—</span>
                    <span class="font-semibold text-center text-sm">å…±ä¹˜2äºº/æ‘©æ‰˜</span>
                    <span class="text-xs text-gray-600 mt-2 text-center">æ¸›ç¢³: 100g/äºº/10km</span>
                </button>
                <button class="transport-option flex flex-col items-center p-5 bg-green-100 rounded-lg shadow hover:bg-green-200 transition-all duration-300 ease-in-out" data-transport="carpool_3" data-carbon-reduction="120">
                    <span class="text-3xl mb-3">ğŸš—</span>
                    <span class="font-semibold text-center text-sm">å…±ä¹˜ 3 äºº</span>
                    <span class="text-xs text-gray-600 mt-2 text-center">æ¸›ç¢³: 120g/äºº/10km</span>
                </button>
                <button class="transport-option flex flex-col items-center p-5 bg-green-100 rounded-lg shadow hover:bg-green-200 transition-all duration-300 ease-in-out" data-transport="carpool_4" data-carbon-reduction="150">
                    <span class="text-3xl mb-3">ğŸš—</span>
                    <span class="font-semibold text-center text-sm">å…±ä¹˜ 4 äºº</span>
                    <span class="text-xs text-gray-600 mt-2 text-center">æ¸›ç¢³: 150g/äºº/10km</span>
                </button>
                 <button class="transport-option flex flex-col items-center p-5 bg-green-100 rounded-lg shadow hover:bg-green-200 transition-all duration-300 ease-in-out" data-transport="carpool_5" data-carbon-reduction="200">
                     <span class="text-3xl mb-3">ğŸš—</span>
                     <span class="font-semibold text-center text-sm">å…±ä¹˜ 5 äºº</span>
                     <span class="text-xs text-gray-600 mt-2 text-center">æ¸›ç¢³: 200g/äºº/10km</span>
                 </button>
                 <button class="transport-option flex flex-col items-center p-5 bg-blue-100 rounded-lg shadow hover:bg-blue-200 transition-all duration-300 ease-in-out" data-transport="thsr_haoxing" data-carbon-reduction="0">
                     <span class="text-3xl mb-3">ğŸš„ğŸšŒ</span>
                     <span class="font-semibold text-center text-sm">é«˜éµxå°ç£å¥½è¡Œ</span>
                     <span class="text-xs text-gray-600 mt-2 text-center">è©³è¦‹å°ˆæ¡ˆèªªæ˜</span>
                 </button>
                 <button class="transport-option flex flex-col items-center p-5 bg-yellow-100 rounded-lg shadow hover:bg-yellow-200 transition-all duration-300 ease-in-out" id="taxi-info-button">
                     <span class="text-3xl mb-3">ğŸš•</span>
                     <span class="font-semibold text-center text-sm">é ç´„è¨ˆç¨‹è»Šå°è¦½</span>
                      <span class="text-xs text-gray-500 mt-1 text-center">é»æ“ŠæŸ¥çœ‹è³‡è¨Š</span>
                 </button>
            </div>

            <div id="thsr-info" class="hidden"></div>
            
            <div class="bg-orange-50 p-6 rounded-lg shadow-inner mb-8">
                <h3 class="text-2xl font-semibold mb-5 text-orange-700 text-center">æ™¯é»è³‡è¨Šèˆ‡å¥½åº·å ±å ±</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-center">
                    <button id="market-mileage-button" class="flex flex-col items-center p-5 bg-purple-100 rounded-lg shadow hover:bg-purple-200 transition-all duration-300 ease-in-out">
                        <span class="text-3xl mb-3">ğŸ›ï¸</span>
                        <span class="font-semibold text-center text-sm">é€›å¸‚é›†å¢é‡Œç¨‹</span>
                        <span class="text-xs text-gray-600 mt-2 text-center">è¨˜éŒ„æ‚¨çš„å¸‚é›†æ¶ˆè²»</span>
                    </button>
                    <button id="photo-album-promo-button" class="flex flex-col items-center p-5 bg-teal-100 rounded-lg shadow hover:bg-teal-200 transition-all duration-300 ease-in-out cursor-pointer">
                        <span class="text-3xl mb-3">ğŸ“¸</span>
                        <span class="font-semibold text-center text-sm">æ™¯é»ç›¸ç°¿æ¨æ’­</span>
                        <span class="text-xs text-gray-600 mt-2 text-center">æŸ¥çœ‹æœ€æ–°æ´»å‹•ç…§ç‰‡</span>
                    </button>
                </div>
            </div>

             <div class="bg-gray-100 p-6 rounded-lg shadow-inner mb-8">
                 <h3 class="text-2xl font-semibold mb-5 text-gray-700 text-center">æ›´å¤šæ´»å‹•èˆ‡è³‡è¨Š</h3>
                 <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-center">
                     <a href="https://drive.google.com/drive/folders/1en2b6PB8A-uxDubopiyW99uUKbUjlqcp?usp=sharing" id="latest-activity-link" target="_blank" class="block p-4 bg-green-600 text-white font-bold rounded-lg shadow hover:bg-green-700 transition-all duration-300 ease-in-out">
                         æœ€æ–°æ´»å‹•å ±åé€£çµ
                         </a>
                     <a href="https://www.facebook.com/groups/321305484230739" target="_blank" class="block p-4 bg-green-600 text-white font-bold rounded-lg shadow hover:bg-green-700 transition-all duration-300 ease-in-out">
                         ç¤¾åœ˜æ´»å‹•è³‡è¨Š
                     </a>
                     <a href="https://www.facebook.com/groups/4309026639329636" target="_blank" class="block p-4 bg-green-600 text-white font-bold rounded-lg shadow hover:bg-green-700 transition-all duration-300 ease-in-out">
                         æ°¸çºŒå„ªç­‰ç”Ÿç¤¾åœ˜
                     </a>
                 </div>
                 <div class="mt-6 text-center">
                     <button id="download-data-button" class="px-8 py-4 bg-blue-700 text-white font-bold rounded-lg shadow hover:bg-blue-800 transition-all duration-300 ease-in-out text-lg">
                         ä¸‹è¼‰æ°¸çºŒæ—…éŠæ•¸æ“š (.html) <i class="fas fa-download ml-2"></i>
                     </button>
                 </div>
             </div>

            <div class="bg-yellow-50 border-l-4 border-yellow-500 text-yellow-800 p-5 mb-8 rounded-md" role="alert">
                <p class="font-bold text-yellow-900 mb-2">æ°¸çºŒæ—…éŠå°è²¼å£« Tips</p>
                <p class="mt-2 animate-pulse-subtle text-gray-700">
                    é¸æ“‡ä½ç¢³äº¤é€šå·¥å…·åŠä½ç¢³æ¸›å¡‘æ—…å®¿ï¼Œæ”œå¸¶ç’°ä¿æ—…å…·åŒ…å«ç›¥æ´—ç”¨å…·ã€æ‹–é‹ã€è³¼ç‰©è¢‹ã€é¤å…·ç­‰ã€‚
                    é€²å…¥è¾²å ´ä¸éš¨æ„æ‘˜æ¡èˆ‡è¸©è¸ï¼Œé‡å¤–è«‹éµå¾ªç”Ÿæ…‹æ—…éŠåŸå‰‡ï¼Œç•™æ„æ²¿é€”è­¦ç¤ºç‰Œï¼Œä¸å¹²æ“¾é‡ç”Ÿå‹•ç‰©ï¼Œä¸æ¡æ‘˜æ¤ç‰©ï¼Œä¸¦å¸¶èµ°æ‰€æœ‰åƒåœ¾ã€‚
                </p>
            </div>

            <div class="text-center text-sm text-gray-600 mt-10">
                <p class="mb-3 font-semibold">å…±åŒé–‹ç™¼å–®ä½ï¼š</p>
                <ul class="list-disc list-inside mx-auto w-fit text-left mt-3 text-gray-700">
                    <li>ç¤¾åœ˜æ³•äººå—æŠ•ç¸£æ°´é‡Œé„‰å•†åœˆå‰µç”Ÿå…±å¥½å”æœƒ</li>
                    <li>ç¤¾åœ˜æ³•äººå—æŠ•ç¸£é’å¹´è¾²æ°‘æ°¸çºŒç™¼å±•å”æœƒ</li>
                    <li>æ°´é‡Œé‡Œå±±åŸºåœ°#<a href="https://www.facebook.com/Satoyamadining" target="_blank" class="text-green-600 hover:underline">é‡Œå±±é¤æ¡Œ</a>åœ˜éšŠ #æ°´é‡Œé’è¾²</li>
                </ul>

                <p class="mb-3 mt-6 font-semibold">æ•™å­¸èˆ‡è¨ˆç•«æ”¯æŒç¶²çµ¡ï¼š</p>
                <ul class="list-disc list-inside mx-auto w-fit text-left mt-3 text-gray-700">
                    <li>åœ‹ç«‹è‡ºç£å¤§å­¸USR#æ°´é‡Œç‡Ÿæ—å€</li>
                    <li>è¾²æ¥­éƒ¨é£Ÿè¾²æ•™è‚²æ¨å»£è¨ˆç•«</li>
                    <li>è¾²æ¥­éƒ¨å°ä¸­å€è¾²æ”¹å ´</li>
                    <li>è¾²æ¥­éƒ¨ç”Ÿç‰©å¤šæ¨£æ€§ç ”ç©¶æ‰€</li>
                    <li>å—æŠ•ç¸£æ”¿åºœè¾²æ¥­è™•</li>
                    <li>å—æŠ•ç¸£è¾²æœƒ</li>
                    <li>æ°´é‡Œé„‰è¾²æœƒ</li>
                </ul>

                <p class="mt-6 text-gray-700">Â© 2025 æ°´é‡Œæ°¸çºŒå…±å¥½è¯ç›Ÿã€‚ç‰ˆæ¬Šæ‰€æœ‰ã€‚</p>
                <p class="mt-2 text-gray-700">é–‹ç™¼è€…ä¿¡ç®±: <a href="mailto:farmcmd@gmail.com" class="text-blue-600 hover:underline">farmcmd@gmail.com</a></p>
                <p class="mt-2 text-gray-700">V2.2ï¼Œæ­¡è¿è‡³FACEBOOKç²‰å°ˆã€Œ<a href="https://www.facebook.com/Satoyamadining" target="_blank" class="text-green-600 hover:underline">é‡Œå±±é¤æ¡Œ</a>ã€æå‡ºå»ºè­°ã€‚</p>
                
                <!-- ç¶²é ç€è¦½äººæ¬¡ -->
                <p class="mt-4 text-xs text-gray-500 border-t border-gray-200 pt-4"><i class="far fa-eye mr-1"></i>ç¶²é ç€è¦½äººæ¬¡: <span id="page-view-count" class="font-bold text-gray-600">çµ±è¨ˆä¸­...</span></p>
            </div>

        </section>

        <!-- Mission Page -->
        <section id="mission-page" class="page-section bg-white p-6 rounded-lg shadow-lg">
             <h2 class="text-2xl font-semibold mb-6 text-green-800 text-center">æ‚¨çš„æ°¸çºŒæ—…éŠä»»å‹™</h2>
             <button id="back-to-home" class="mb-6 px-6 py-3 bg-gray-300 rounded-lg hover:bg-gray-400 transition-all duration-300 ease-in-out"><i class="fas fa-arrow-left mr-2"></i>è¿”å›é¦–é </button>
             <button id="change-transport-button" class="mb-6 ml-4 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-300 ease-in-out"><i class="fas fa-car-side mr-2"></i>æ›´æ›äº¤é€šæ–¹å¼</button>
             <div class="mb-8 p-4 bg-green-100 rounded-md shadow-sm border border-green-200">
                 <p class="font-semibold text-gray-700">ç›®å‰äº¤é€šæ–¹å¼: <span id="current-transport-display" class="text-green-800 font-bold">æœªé¸æ“‡</span></p>
             </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 bg-gray-200 rounded-lg overflow-hidden shadow-md p-6">
                <div class="lg:col-span-2">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-semibold text-gray-700">åœ°åœ–æ¢ç´¢</h3>
                        <button id="refresh-map-page-button" class="p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors duration-150 ease-in-out" title="åˆ·æ–°é é¢">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                    <!-- åœ°åœ–å®¹å™¨ï¼Œå¢åŠ è¼‰å…¥ä¸­é®ç½©çš„çˆ¶å±¤ -->
                    <div id="map-container" class="relative">
                        <div id="map"></div>
                        <!-- è¼‰å…¥ä¸­/éŒ¯èª¤é®ç½© -->
                        <div id="map-overlay" class="absolute inset-0 bg-gray-100 flex flex-col justify-center items-center z-10 transition-opacity duration-500">
                            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-green-700 mb-4"></div>
                            <p id="map-status" class="text-gray-600 font-semibold">åœ°åœ–è¼‰å…¥ä¸­...</p>
                        </div>
                    </div>
                    
                     <div class="p-4 bg-gray-300 text-center mt-4 rounded-md">
                         <p class="mt-2 text-sm text-gray-700">è«‹å¾ä¸‹æ–¹æ™¯é»åˆ—è¡¨æˆ–åœ°åœ–ä¸Šé¸æ“‡èµ·é»å’Œçµ‚é»</p>
                         <p id="selected-points-display" class="mt-2 text-base font-semibold text-green-800">èµ·é»: æœªé¸æ“‡ | çµ‚é»: æœªé¸æ“‡</p>
                         <button id="calculate-mileage-button" class="mt-5 px-8 py-4 bg-green-600 text-white font-bold rounded-lg shadow hover:bg-green-700 transition-all duration-300 ease-in-out text-lg"><i class="fas fa-route mr-2"></i> è¨ˆç®—æœ¬æ¬¡æ—…ç¨‹é‡Œç¨‹èˆ‡æ¸›ç¢³</button>
                         <p id="trip-calculation-status" class="mt-4 text-sm font-semibold text-gray-700"></p>
                     </div>
                </div>

                <div class="lg:col-span-1 flex flex-col gap-6">

                    <div class="bg-gray-50 p-4 rounded-lg shadow-md overflow-y-auto max-h-[70vh]">
                        <h3 class="text-xl font-semibold mb-4 text-gray-700">æ™¯é»åˆ—è¡¨</h3>
                        <ul id="poi-list" class="space-y-3">
                            <li class="text-gray-500 text-center">è¼‰å…¥æ™¯é»ä¸­...</li>
                        </ul>
                    </div>
                    
                    <div class="bg-gray-50 p-4 rounded-lg shadow-md">
                        <h3 class="text-xl font-semibold mb-4 text-gray-700">æ°¸çºŒè¡Œå‹•èˆ‡æ´»å‹•</h3>
                         <p class="text-sm text-green-800 font-bold mb-4">
                             ç´€éŒ„æ‚¨åœ¨é€™è¶Ÿæ—…ç¨‹ä¸­åšå‡ºå°ç’°å¢ƒç¶­è­·ã€æ°¸çºŒç”Ÿç”¢ã€ç”Ÿæ…‹ä¿è­·ã€äººèˆ‡è‡ªç„¶å’Œå¹³å…±è™•çš„ç”Ÿæ´»æ…‹åº¦ï¼Œè®“æ°¸çºŒç²¾ç¥å¯¦è¸åœ¨æ‚¨çš„ç”Ÿæ´»ä¸­ã€‚
                         </p>

                        <div class="mb-6 pb-4 border-b border-gray-200">
                            <h4 class="text-lg font-medium mb-3 text-gray-600">è¨˜éŒ„æ‚¨çš„æ°¸çºŒè¡Œå‹• (é¸æ“‡é …ç›®ä¸¦å¡«å¯«ç´€éŒ„ç²å¾—ç©åˆ†)</h4>
                            <div id="selectable-actions-list" class="mb-4 space-y-2">
                                <p class="text-gray-500 text-center">è¼‰å…¥è¡Œå‹•é …ç›®ä¸­...</p>
                            </div>

                            <textarea id="sustainable-action-log" class="w-full p-3 border rounded-md focus:outline-none focus:ring focus:border-green-500 text-sm" rows="4" placeholder="è«‹åœ¨æ­¤è¼¸å…¥æ‚¨å…·é«”çš„æ°¸çºŒè¡Œå‹•è¨˜éŒ„..."></textarea>
                            <button id="log-action-button" class="mt-3 px-6 py-3 bg-green-600 text-white rounded-lg shadow hover:bg-green-700 transition-all duration-300 ease-in-out text-sm"><i class="fas fa-check-circle mr-2"></i>è¨˜éŒ„è¡Œå‹•ä¸¦ç²å¾—ç©åˆ†</button>
                            <p id="action-log-status" class="mt-3 text-sm font-semibold text-gray-600"></p>
                        </div>

                        <div class="mb-6 pb-4 border-b border-gray-200">
                             <h4 class="text-lg font-medium mb-3 text-gray-600">æ°¸çºŒå±±æ‘ä»»å‹™æ´»å‹• (é¸æ“‡æ´»å‹•å¾Œé»æ“ŠåƒåŠ æŒ‰éˆ•)</h4>
                             <p class="text-sm text-green-800 font-bold mb-4">
                                 ä»»å‹™æ´»å‹•éå®šæœŸèˆ‰è¾¦ï¼Œå»ºè­°æ‚¨åœ¨å‡ºç™¼å‰ï¼Œé€éå„æ™¯é»çš„ç²‰çµ²å°ˆé æˆ–ç¤¾åœ˜ç­è§£æ´»å‹•è³‡è¨Š!
                             </p>
                             <ul id="activity-list" class="space-y-2 text-sm text-gray-700 mb-4">
                                 <li class="text-gray-500 text-center">è¼‰å…¥æ´»å‹•ä¸­...</li>
                             </ul>
                             <button id="participate-activity-button" class="px-6 py-3 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition-all duration-300 ease-in-out text-sm"><i class="fas fa-calendar-check mr-2"></i>åƒåŠ æ´»å‹• (è¼¸å…¥é©—è­‰ç¢¼èˆ‡å…§å®¹)</button>
                         </div>

                         <div class="bg-green-50 p-4 rounded-lg shadow-inner max-h-[300px] overflow-y-auto border border-green-200">
                             <h4 class="lg font-medium mb-3 text-gray-600">æˆ‘çš„è¡Œå‹•ç´€éŒ„</h4>
                             <div id="logged-actions-list" class="space-y-3">
                                 <p class="text-gray-500 text-center">å°šç„¡è¡Œå‹•ç´€éŒ„</p>
                             </div>
                         </div>

                    </div>
                </div>
            </div>
        </section>

    </main>
    
    <!-- Modal çµæ§‹ä¿æŒåŸæ¨£ -->
    <!-- ç¶ è‰²æ¶ˆè²»è©•é‘‘ Modal -->
    <div id="green-consumption-modal" class="modal-overlay hidden">
        <div class="modal-content shadow-xl w-full max-w-2xl">
            <span class="close-button">Ã—</span>
            <h3 class="text-2xl font-bold mb-6 text-emerald-700 text-center">ç¶ è‰²æ¶ˆè²»è©•é‘‘è¨ˆç®—ç³»çµ±</h3>
            
            <div class="mb-4">
                 <div class="flex border-b border-gray-200">
                    <button class="tab-btn w-1/3 py-2 px-4 text-center font-bold text-gray-600 hover:text-emerald-600 focus:outline-none border-b-2 border-transparent hover:border-emerald-600 active-tab" data-tab="tab-green-procure">
                        1. ç¶ è‰²æ¡è³¼
                    </button>
                    <button class="tab-btn w-1/3 py-2 px-4 text-center font-bold text-gray-600 hover:text-emerald-600 focus:outline-none border-b-2 border-transparent hover:border-emerald-600" data-tab="tab-sroi">
                        2. SROI è©•é‘‘
                    </button>
                    <button class="tab-btn w-1/3 py-2 px-4 text-center font-bold text-gray-600 hover:text-emerald-600 focus:outline-none border-b-2 border-transparent hover:border-emerald-600" data-tab="tab-project">
                        3. å°ˆæ¡ˆæ¡è³¼
                    </button>
                </div>
            </div>

            <!-- 1. ç¶ è‰²æ¡è³¼ Tab -->
            <div id="tab-green-procure" class="tab-content block">
                <div class="green-calc-section">
                    <h4 class="text-lg font-bold mb-3 text-emerald-800">æ¶ˆè²»é¡åˆ¥é¸æ“‡</h4>
                    <div class="mb-3">
                        <label class="block text-sm font-medium text-gray-700 mb-1">æ¨™ç« é¡å‹:</label>
                        <select id="green-label-select" class="w-full p-2 border rounded-md">
                            <option value="Organic">æœ‰æ©Ÿè¾²ç”¢å“æ¨™ç«  (Organic)</option>
                            <option value="TAP">ç”¢éŠ·å±¥æ­·è¾²ç”¢å“æ¨™ç«  (TAP)</option>
                            <option value="CAS">CASå°ç£å„ªè‰¯è¾²ç”¢å“æ¨™ç«  (CAS)</option>
                            <option value="QRCode">æº¯æºç”¢å“æ¨™ç¤º (QR Code)</option>
                            <option value="EcoLabel">å°åœ°ç¶ è‰²ç’°å¢ƒçµ¦ä»˜ç”Ÿæ…‹æ¨™ç« (å¦‚:çŸ³è™ã€æ¿•åœ°ç­‰)</option>
                        </select>
                    </div>
                    <div class="mb-3">
                         <label class="block text-sm font-medium text-gray-700 mb-1">ç”¢å“é¡å‹:</label>
                         <select id="green-product-type" class="w-full p-2 border rounded-md">
                             <option value="produce">è¾²ç”¢å“</option>
                             <option value="processed">åŠ å·¥é£Ÿå“</option>
                         </select>
                    </div>
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">æ•¸é‡:</label>
                            <input type="number" id="green-qty" class="w-full p-2 border rounded-md" min="1" value="1">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">å–®åƒ¹:</label>
                            <input type="number" id="green-price" class="w-full p-2 border rounded-md" min="0" placeholder="0">
                        </div>
                    </div>
                    <div class="text-right mb-4">
                        <p class="text-lg font-bold text-gray-800">å°è¨ˆ: <span id="green-subtotal" class="text-emerald-600">0</span></p>
                    </div>
                    <button id="log-green-procure-btn" class="w-full px-6 py-3 bg-emerald-600 text-white font-bold rounded-lg shadow hover:bg-emerald-700">ç™»å…¥æ¶ˆè²»é¡æŒ‰éˆ•</button>
                    <div class="mt-4 p-3 bg-emerald-50 rounded text-center">
                        <p class="text-sm font-bold text-gray-600">æœ¬å€ç™»éŒ„ç¸½é¡</p>
                        <p id="total-green-procure-display" class="text-2xl font-bold text-emerald-800">$0</p>
                    </div>
                </div>
            </div>

            <!-- 2. SROI Tab -->
            <div id="tab-sroi" class="tab-content hidden">
                 <div class="green-calc-section">
                    <h4 class="text-lg font-bold mb-3 text-emerald-800">SROI ç¤¾æœƒæŠ•è³‡å ±é…¬ç‡ç¤¾åœ˜</h4>
                    <div class="mb-3">
                        <label class="block text-sm font-medium text-gray-700 mb-1">é¸æ“‡å–®ä½ (å«æ¬Šé‡):</label>
                        <select id="sroi-unit-select" class="w-full p-2 border rounded-md">
                            <option value="1.95">æŒ‡ä»¤æ•™è‚²è¾²å ´ (195%)</option>
                            <option value="1.95">é˜¿çˆ¾å–œ (195%)</option>
                            <option value="1.58">é›¨ç¤¾å±±ä¸‹ (158%)</option>
                            <option value="1.58">æ˜æšé¤Šèœ‚ (158%)</option>
                            <option value="2.66">æ¹§å¥é…ªæ¢¨åœ’ (266%)</option>
                            <option value="3.40">æ°´é‡Œé‡Œå±±é¤æ¡Œåœ˜éšŠ (340%)</option>
                        </select>
                    </div>
                    <div class="mb-3">
                         <label class="block text-sm font-medium text-gray-700 mb-1">æ¶ˆè²»é¡å‹:</label>
                         <select id="sroi-type-select" class="w-full p-2 border rounded-md">
                             <option value="produce">è¾²ç”¢å“</option>
                             <option value="processed">åŠ å·¥é£Ÿå“</option>
                             <option value="tour">éŠç¨‹</option>
                             <option value="diy">DIYæ´»å‹•</option>
                             <option value="sustainable_act">æ°¸çºŒæ´»å‹•</option>
                             <option value="food_edu">é£Ÿè¾²æ•™è‚²</option>
                             <option value="eco_edu">ç”Ÿæ…‹æ•™è‚²</option>
                         </select>
                    </div>
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">æ•¸é‡:</label>
                            <input type="number" id="sroi-qty" class="w-full p-2 border rounded-md" min="1" value="1">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">å–®åƒ¹:</label>
                            <input type="number" id="sroi-price" class="w-full p-2 border rounded-md" min="0" placeholder="0">
                        </div>
                    </div>
                    <div class="text-right mb-4">
                        <p class="text-sm text-gray-500">è¨ˆç®—å…¬å¼: æ•¸é‡ * (å–®åƒ¹ * SROIæ¬Šé‡)</p>
                        <p class="text-lg font-bold text-gray-800">SROI åƒ¹å€¼å°è¨ˆ: <span id="sroi-subtotal" class="text-emerald-600">0</span></p>
                    </div>
                    <button id="log-sroi-btn" class="w-full px-6 py-3 bg-emerald-600 text-white font-bold rounded-lg shadow hover:bg-emerald-700">ç™»å…¥æ¶ˆè²»é¡æŒ‰éˆ•</button>
                    <div class="mt-4 p-3 bg-emerald-50 rounded text-center">
                        <p class="text-sm font-bold text-gray-600">æœ¬å€ç™»éŒ„ç¸½é¡</p>
                        <p id="total-sroi-display" class="text-2xl font-bold text-emerald-800">$0</p>
                    </div>
                </div>
            </div>

            <!-- 3. å°ˆæ¡ˆæ¡è³¼ Tab -->
            <div id="tab-project" class="tab-content hidden">
                 <div class="green-calc-section">
                    <h4 class="text-lg font-bold mb-3 text-emerald-800">å°ˆæ¡ˆæ¡è³¼ç™»éŒ„</h4>
                    
                    <div id="project-password-section" class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">è«‹è¼¸å…¥å°ˆæ¡ˆå¯†ç¢¼:</label>
                        <div class="flex gap-2">
                             <input type="password" id="project-password" class="w-full p-2 border rounded-md" placeholder="è«‹è¼¸å…¥å¯†ç¢¼">
                             <button id="unlock-project-btn" class="px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700">è§£é–</button>
                        </div>
                        <p id="password-msg" class="text-xs text-red-500 mt-1"></p>
                    </div>

                    <div id="project-entry-section" class="hidden">
                        <div class="mb-3">
                            <label class="block text-sm font-medium text-gray-700 mb-1">å°ˆæ¡ˆèªªæ˜:</label>
                            <input type="text" id="project-desc" class="w-full p-2 border rounded-md" placeholder="ä¾‹å¦‚: ä¼æ¥­åœ˜é«”æ¡è³¼">
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-1">æ¶ˆè²»é‡‘é¡:</label>
                            <input type="number" id="project-amount" class="w-full p-2 border rounded-md" min="0" placeholder="0">
                        </div>
                        <button id="log-project-btn" class="w-full px-6 py-3 bg-emerald-600 text-white font-bold rounded-lg shadow hover:bg-emerald-700">ç™»å…¥å°ˆæ¡ˆæ¶ˆè²»é‡‘é¡</button>
                    </div>
                    
                    <div class="mt-4 p-3 bg-emerald-50 rounded text-center">
                        <p class="text-sm font-bold text-gray-600">æœ¬å€ç™»éŒ„ç¸½é¡</p>
                        <p id="total-project-display" class="text-2xl font-bold text-emerald-800">$0</p>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- POI Modal -->
    <div id="poi-modal" class="modal-overlay hidden">
        <div class="modal-content shadow-xl">
            <span class="close-button">Ã—</span>
            <h3 id="poi-modal-title" class="text-2xl font-bold mb-4 text-green-800">æ™¯é»æ¨™é¡Œ</h3>
            <img id="poi-modal-image" src="" alt="æ™¯é»åœ–ç‰‡" class="mb-4 hidden w-full h-48 object-cover rounded-md">
            <div class="poi-modal-content-body">
                 <p id="poi-modal-description" class="text-gray-700 leading-relaxed"></p>
                 <p id="poi-modal-coordinates" class="text-sm text-gray-600 mt-4"></p>
                 <div id="poi-modal-social" class="mt-4 text-sm">
                 </div>
                 <div id="poi12-buttons" class="mt-6 hidden flex flex-col space-y-3">
                      <a href="https://farmcbd.my.canva.site/dagl50o3mt8" target="_blank" class="px-6 py-3 bg-blue-600 text-white font-bold rounded-lg shadow hover:bg-blue-700 transition-all duration-300 ease-in-out text-center"><i class="fas fa-gamepad mr-2"></i>æ°´é‡Œå››å­£æ¢…éŠå°éŠæˆ²</a>
                      <button id="sroi-order-button-poi12" class="px-6 py-3 bg-purple-600 text-white font-bold rounded-lg shadow hover:bg-purple-700 transition-all duration-300 ease-in-out text-center"><i class="fas fa-leaf mr-2"></i>SROIç”Ÿæ…‹æ£²åœ°è¾²ç”¢å“è¨‚è³¼&ESGä¼æ¥­æ¡è³¼è¡¨å–®</button>
                 </div>
                 <div id="sroi-info-button-container" class="mt-6 hidden">
                     <button id="show-sroi-info-button" class="w-full px-6 py-3 bg-purple-600 text-white font-bold rounded-lg shadow hover:bg-purple-700 transition-all duration-300 ease-in-out text-center"><i class="fas fa-leaf mr-2"></i>SROIç”Ÿæ…‹æ£²åœ°è¾²ç”¢å“è¨‚è³¼&ESGä¼æ¥­æ¡è³¼è¡¨å–®</button>
                 </div>
                 <div id="poi-modal-dynamic-buttons" class="mt-6 space-y-3"></div>
            </div>

            <div id="poi-review-section" class="hidden mt-6 pt-4 border-t border-gray-200">
                 <h4 class="text-lg font-medium mb-3 text-gray-600">æ°¸çºŒæ¶ˆè²»å¯©æ ¸ (æ¶ˆè²»ä¸¦è¼¸å…¥å¯©æ ¸ç¢¼ç²å¾—ç©åˆ†)</h4>
                 <div class="mb-3">
                     <label for="consumption-amount" class="block text-sm font-medium text-gray-700 mb-1">æ¶ˆè²»é‡‘é¡:</label>
                     <input type="number" id="consumption-amount" class="w-full p-2 border rounded-md focus:outline-none focus:ring focus:border-green-500 text-sm" step="1" min="0" placeholder="è«‹è¼¸å…¥æ¶ˆè²»é‡‘é¡">
                 </div>
                 <div class="mb-4">
                     <label for="review-code" class="block text-sm font-medium text-gray-700 mb-1">å¯©æ ¸ç¢¼ (3ç¢¼æ•¸å­—):</label>
                     <input type="text" id="review-code" class="w-full p-2 border rounded-md focus:outline-none focus:ring focus:border-green-500 text-sm" maxlength="3" placeholder="è«‹è¼¸å…¥3ç¢¼æ•¸å­—å¯©æ ¸ç¢¼">
                 </div>
                 <button id="submit-poi-review" class="px-6 py-3 bg-green-600 text-white rounded-lg shadow hover:bg-green-700 transition-all duration-300 ease-in-out text-sm"><i class="fas fa-check-circle mr-2"></i>æäº¤å¯©æ ¸ä¸¦ç²å¾—ç©åˆ†</button>
                 <p id="poi-review-status" class="mt-3 text-sm font-semibold text-gray-600"></p>
            </div>

             <div class="mt-6 flex justify-end space-x-4">
                 <button id="set-as-start-button" class="px-6 py-3 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-all duration-300 ease-in-out"><i class="fas fa-map-marker-alt mr-2"></i>è¨­å®šç‚ºèµ·é»</button>
                 <button id="set-as-end-button" class="px-6 py-3 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-all duration-300 ease-in-out"><i class="fas fa-flag-checkered mr-2"></i>è¨­å®šç‚ºçµ‚é»</button>
             </div>
        </div>
    </div>

    <!-- Activity Modal -->
    <div id="activity-modal" class="modal-overlay hidden">
        <div class="modal-content shadow-xl">
            <span class="close-button">Ã—</span>
            <h3 class="text-2xl font-bold mb-4 text-green-800">åƒåŠ æ´»å‹•ï¼š<span id="selected-activity-name"></span></h3>
            <img id="activity-modal-image" src="" alt="æ´»å‹•ç›¸é—œåœ–ç‰‡" class="mb-4 hidden">
            <p class="mb-2 text-gray-700">è«‹è¼¸å…¥æ´»å‹•é©—è­‰ç¢¼</p>
            <input type="text" id="verification-code-input" class="w-full p-3 border rounded-md mb-4 focus:outline-none focus:ring focus:border-green-500">
            <p class="mb-2 text-gray-700">è«‹è¼¸å…¥æ´»å‹•å…§å®¹æˆ–èª²ç¨‹åç¨±</p>
            <textarea id="activity-content-input" class="w-full p-3 border rounded-md mb-4 focus:outline-none focus:ring focus:border-green-500" rows="3" placeholder="ä¾‹å¦‚ï¼šåƒåŠ äº†é‡Œå±±å€¡è­°é£Ÿè¾²ä¸‹åˆèŒ¶è¬›å ‚ï¼Œå­¸ç¿’è£½ä½œé¦™è‰é¤…ä¹¾"></textarea>
            <button id="submit-activity-log" class="px-6 py-3 bg-green-600 text-white rounded-lg shadow hover:bg-green-700 transition-all duration-300 ease-in-out text-sm"><i class="fas fa-check-square mr-2"></i>è¨˜éŒ„æ´»å‹•ä¸¦ç²å¾—ç©åˆ†</button>
            <p id="activity-log-status" class="mt-4 text-sm font-semibold text-gray-700"></p>
        </div>
    </div>

    <!-- THSR Modal -->
    <div id="thsr-info-modal" class="modal-overlay hidden">
        <div class="modal-content shadow-xl">
            <span class="close-button">Ã—</span>
            <h3 class="text-2xl font-bold mb-4 text-blue-800">é«˜éµå‡æœŸxå°ç£å¥½è¡Œ äº¤é€šè³‡è¨Š</h3>
            <div class="text-gray-700 leading-relaxed">
                <p class="mb-3">æ‚¨å·²æŠµé”æ°´é‡Œå°é®ï¼Œæ„Ÿè¬æ‚¨ä½¿ç”¨é«˜éµå‡æœŸåšç‚ºæ‚¨çš„æ¸›ç¢³æ—…éŠæ–¹å¼ï¼Œä»¥ä¸‹æ˜¯æˆ‘å€‘æä¾›çµ¦æ‚¨çš„äº¤é€šèˆ‡ä½å®¿è³‡è¨Š:</p>
                <p class="mb-3">å°ç£é«˜éµXå°éµå°ä¸­å¹²åŸç«™ > å°ç£å¥½è¡Œ6333Dé›†é›†ç·š > åˆ°æ°´é‡Œ</p>
                <p class="mb-4">
                    æ°´é‡Œå°ç£å¥½è¡Œåˆ° >
                    <a href="https://www.taiwantrip.com.tw/Frontend/Route/Select_p?RouteID=R0096" target="_blank" class="text-blue-600 hover:underline font-semibold">6288é›™é¾ç·š</a> >
                    <a href="https://www.taiwantrip.com.tw/Frontend/Route/Select_p?RouteID=R0061" target="_blank" class="text-blue-600 hover:underline font-semibold">6671è»Šç¨‹ç·š</a> >
                    <a href="https://www.taiwantrip.com.tw/Frontend/Route/Select_p?RouteID=R0068" target="_blank" class="text-blue-600 hover:underline font-semibold">6734ã€6732æ±åŸ”ç·š</a>ã€‚
                 </p>
                <p class="mb-4">ä½å®¿å»ºè­°è«‹åƒè€ƒæ™¯é» > ç’°ä¿æ—…å®¿æ¨è–¦ã€‚</p>
            </div>
        </div>
    </div>

    <!-- Log Trip Modal -->
    <div id="log-trip-modal" class="modal-overlay hidden">
        <div class="modal-content shadow-xl">
            <span class="close-button">Ã—</span>
            <h3 class="text-2xl font-bold mb-4 text-orange-700">è¨˜éŒ„å‰å¾€æ™¯é»çš„æ—…ç¨‹</h3>
            <p class="mb-4 text-gray-700">æ‚¨æ­£åœ¨è¨˜éŒ„å‰å¾€ï¼š<span id="log-trip-poi-name" class="font-semibold text-green-800"></span></p>
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-3">é¸æ“‡äº¤é€šæ–¹å¼:</label>
                <div id="log-trip-transport-options" class="flex flex-wrap gap-3">
                </div>
                 <p id="log-trip-transport-status" class="mt-3 text-sm font-semibold text-red-600 hidden">è«‹é¸æ“‡äº¤é€šæ–¹å¼ã€‚</p>
             </div>

            <div class="mb-6">
                <label for="log-trip-mileage" class="block text-sm font-medium text-gray-700 mb-3">è¼¸å…¥æŠµé”é‡Œç¨‹æ•¸ (å…¬é‡Œ):</label>
                <input type="number" id="log-trip-mileage" class="w-full p-3 border rounded-md focus:outline-none focus:ring focus:border-green-500" step="0.1" min="0" placeholder="ä¾‹å¦‚: 5.2">
                <p id="log-trip-mileage-status" class="mt-3 text-sm font-semibold text-red-600 hidden">è«‹è¼¸å…¥æœ‰æ•ˆçš„é‡Œç¨‹æ•¸ã€‚</p>
            </div>

            <div class="mt-6 flex justify-end">
                <button id="submit-log-trip" class="px-8 py-4 bg-orange-600 text-white font-bold rounded-lg shadow hover:bg-orange-700 transition-all duration-300 ease-in-out text-lg"><i class="fas fa-road mr-2"></i>è¨˜éŒ„æ—…ç¨‹ä¸¦è¨ˆç®—æ¸›ç¢³/åˆ†æ•¸</button>
            </div>
             <p id="log-trip-status" class="mt-4 text-sm font-semibold text-gray-700"></p>
         </div>
    </div>

    <!-- Taxi Info Modal -->
    <div id="taxi-info-modal" class="modal-overlay hidden">
        <div class="modal-content shadow-xl">
            <span class="close-button">Ã—</span>
            <h3 class="text-2xl font-bold mb-4 text-yellow-700">å¤šå…ƒè¨ˆç¨‹è»Šå°è¦½æ—…éŠè³‡è¨Š</h3>
            <div class="text-gray-700 leading-relaxed">
                <p class="mb-2"><strong>è»Šè™Ÿ:</strong> TBD-5339</p>
                <p class="mb-2"><strong>é§•é§›äºº:</strong> è©¹è–æ…ˆ</p>
                <p class="mb-2"><strong>ç‡Ÿæ¥­æ™‚é–“:</strong> 9:00~20:00</p>
                <p class="mb-2"><strong>æ—…éŠç¯„åœ:</strong> æ°´é‡Œé„‰ã€ä¿¡ç¾©é„‰ã€æ—¥æœˆæ½­</p>
                <p class="mb-2"><strong>æœ€å¤§ä¹˜å®¢æ•¸:</strong> 4</p>
                <p class="mb-2"><strong>é§•é§›äººæ°¸çºŒæ—…éŠå°è¦½åŸ¹è¨“æ™‚æ•¸:</strong> 12/æ™‚</p>
                <p class="mb-2"><strong>é ç´„å«è»Šé›»è©±:</strong> 0980-015-339</p>
                <p class="mb-2"><strong>LINE ID:</strong> æœªæä¾›</p>
            </div>
             <p class="mt-6 text-sm text-gray-600">è‹¥æœ‰éœ€æ±‚è«‹æ–¼å‡ºç™¼ä¸€å‘¨å‰ç›´æ¥è¯ç¹«é§•é§›äººé ç´„åŠç¢ºèªè©³ç´°è³‡è¨Šã€‚</p>
        </div>
    </div>

    <!-- Photo Album Modal -->
    <div id="photo-album-modal" class="modal-overlay hidden">
        <div class="modal-content shadow-xl w-full max-w-md">
            <span class="close-button">Ã—</span>
            <h3 class="text-2xl font-bold mb-6 text-teal-700 text-center">æ™¯é»ç›¸ç°¿æ¨æ’­</h3>
            <div class="space-y-4">
                <div>
                    <h4 class="text-lg font-semibold text-gray-700 mb-2">ç²¾é¸æ—…ç¨‹</h4>
                    <ul class="list-disc list-inside pl-4 space-y-1">
                        <li><a href="#" class="text-blue-600 hover:underline photo-album-link" data-album-id="xiaonong">å°è¾²éŠç¨‹</a></li>
                        <li><a href="#" class="text-blue-600 hover:underline photo-album-link" data-album-id="shengtai">ç”Ÿæ…‹æ—…éŠ</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-semibold text-gray-700 mb-2">å¥½äº‹å¸‚é›†</h4>
                    <ul class="list-disc list-inside pl-4 space-y-1">
                        <li><a href="https://photos.google.com/share/AF1QipN86zQIAJaA-HyNbExPBNARmU7VT1eEOS2JNsjAC1VfonWpOT5zDAwIVwbueSdfWQ?key=NlN1NlVVS0tZdWhiRV9HYnlsSnNsV0VXVHN5YVJR" target="_blank" class="text-blue-600 hover:underline">æ˜Ÿå…‰å¸‚é›†</a></li>
                        </ul>
                </div>
            </div>
            <p class="text-xs text-gray-500 mt-6 text-center">éƒ¨åˆ†ç›¸ç°¿é€£çµå»ºè¨­ä¸­ï¼Œæ•¬è«‹æœŸå¾…ï¼</p>
        </div>
    </div>

    <!-- ä¼æ¥­ç‰ˆ Modal -->
    <div id="enterprise-modal" class="modal-overlay hidden">
        <div class="modal-content shadow-xl">
            <span class="close-button">Ã—</span>
            <h3 class="text-2xl font-bold mb-4 text-yellow-700 text-center">ä¼æ¥­æ°¸çºŒæ—…éŠå°ˆå€</h3>
            <div class="text-gray-700 leading-relaxed space-y-4">
                <div class="text-center text-5xl mb-4">ğŸ¢</div>
                <p class="text-center font-bold text-gray-800">æ­¡è¿ä¼æ¥­å¤¥ä¼´å“¡å·¥ç™»å…¥</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                     <a href="#" class="block p-4 bg-yellow-50 hover:bg-yellow-100 border border-yellow-200 rounded-lg text-center transition duration-300 group"><span class="font-bold text-yellow-800">â—¯â—¯â—¯ä¼æ¥­/é›†åœ˜</span><span class="block text-xs text-gray-500 mt-1">(é€£çµå»ºç½®ä¸­)</span></a>
                     <a href="#" class="block p-4 bg-yellow-50 hover:bg-yellow-100 border border-yellow-200 rounded-lg text-center transition duration-300 group"><span class="font-bold text-yellow-800">â—¯â—¯â—¯ä¼æ¥­/é›†åœ˜</span><span class="block text-xs text-gray-500 mt-1">(é€£çµå»ºç½®ä¸­)</span></a>
                     <a href="#" class="block p-4 bg-yellow-50 hover:bg-yellow-100 border border-yellow-200 rounded-lg text-center transition duration-300 group"><span class="font-bold text-yellow-800">â—¯â—¯â—¯ä¼æ¥­/é›†åœ˜</span><span class="block text-xs text-gray-500 mt-1">(é€£çµå»ºç½®ä¸­)</span></a>
                     <a href="#" class="block p-4 bg-yellow-50 hover:bg-yellow-100 border border-yellow-200 rounded-lg text-center transition duration-300 group"><span class="font-bold text-yellow-800">â—¯â—¯â—¯ä¼æ¥­/é›†åœ˜</span><span class="block text-xs text-gray-500 mt-1">(é€£çµå»ºç½®ä¸­)</span></a>
                     <a href="#" class="block p-4 bg-yellow-50 hover:bg-yellow-100 border border-yellow-200 rounded-lg text-center transition duration-300 group"><span class="font-bold text-yellow-800">â—¯â—¯â—¯ä¼æ¥­/é›†åœ˜</span><span class="block text-xs text-gray-500 mt-1">(é€£çµå»ºç½®ä¸­)</span></a>
                     <a href="#" class="block p-4 bg-yellow-50 hover:bg-yellow-100 border border-yellow-200 rounded-lg text-center transition duration-300 group"><span class="font-bold text-yellow-800">â—¯â—¯â—¯ä¼æ¥­/é›†åœ˜</span><span class="block text-xs text-gray-500 mt-1">(é€£çµå»ºç½®ä¸­)</span></a>
                </div>
            </div>
        </div>
    </div>

    <!-- æ°¸çºŒæ”¿åºœ Modal -->
    <div id="gov-modal" class="modal-overlay hidden">
        <div class="modal-content shadow-xl">
            <span class="close-button">Ã—</span>
            <h3 class="text-2xl font-bold mb-4 text-blue-700 text-center">æ°¸çºŒæ”¿åºœç®¡ç†å¹³å°</h3>
            <div class="text-gray-700 leading-relaxed space-y-4">
                <div class="text-center text-5xl mb-4">ğŸ›ï¸</div>
                <p class="text-center font-bold text-gray-800">æ­¡è¿å…¬å‹™æ©Ÿé—œåŒä»ç™»å…¥</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <a href="https://docs.google.com/document/d/1v2TkJWN0WbwG3uOjUEaZCwci5UfKnkQSaiE9JEc-Hoo/edit?tab=t.0" target="_blank" class="block p-4 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg text-center transition duration-300 group">
                        <span class="font-bold text-blue-800 group-hover:text-blue-900 block">å—æŠ•ç¸£æ”¿åºœè¾²æ¥­è™•æ—ä¿ç§‘</span>
                        <span class="block text-xs text-gray-600 mt-1 font-semibold">ä¸€æ¬¡å‹è¨ˆç•«æ´»å‹•</span>
                        <span class="block text-xs text-blue-500 mt-1 hover:underline">SROI ç¤¾æœƒåƒ¹å€¼å ±å‘Šæ›¸</span>
                    </a>
                    <a href="#" class="block p-4 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg text-center transition duration-300 group"><span class="font-bold text-blue-800">â—¯â—¯â—¯æ©Ÿé—œ/æ©Ÿæ§‹</span><span class="block text-xs text-gray-500 mt-1">(é€£çµå»ºç½®ä¸­)</span></a>
                    <a href="#" class="block p-4 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg text-center transition duration-300 group"><span class="font-bold text-blue-800">â—¯â—¯â—¯æ©Ÿé—œ/æ©Ÿæ§‹</span><span class="block text-xs text-gray-500 mt-1">(é€£çµå»ºç½®ä¸­)</span></a>
                    <a href="#" class="block p-4 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg text-center transition duration-300 group"><span class="font-bold text-blue-800">â—¯â—¯â—¯æ©Ÿé—œ/æ©Ÿæ§‹</span><span class="block text-xs text-gray-500 mt-1">(é€£çµå»ºç½®ä¸­)</span></a>
                    <a href="#" class="block p-4 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg text-center transition duration-300 group"><span class="font-bold text-blue-800">â—¯â—¯â—¯æ©Ÿé—œ/æ©Ÿæ§‹</span><span class="block text-xs text-gray-500 mt-1">(é€£çµå»ºç½®ä¸­)</span></a>
                    <a href="#" class="block p-4 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg text-center transition duration-300 group"><span class="font-bold text-blue-800">â—¯â—¯â—¯æ©Ÿé—œ/æ©Ÿæ§‹</span><span class="block text-xs text-gray-500 mt-1">(é€£çµå»ºç½®ä¸­)</span></a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ç¶ è‰²æ¶ˆè²»è©•é‘‘ Modal -->
    <div id="green-consumption-modal" class="modal-overlay hidden">
        <div class="modal-content shadow-xl w-full max-w-2xl">
            <span class="close-button">Ã—</span>
            <h3 class="text-2xl font-bold mb-6 text-emerald-700 text-center">ç¶ è‰²æ¶ˆè²»è©•é‘‘è¨ˆç®—ç³»çµ±</h3>
            <div class="mb-4">
                 <div class="flex border-b border-gray-200">
                    <button class="tab-btn w-1/3 py-2 px-4 text-center font-bold text-gray-600 hover:text-emerald-600 focus:outline-none border-b-2 border-transparent hover:border-emerald-600 active-tab" data-tab="tab-green-procure">1. ç¶ è‰²æ¡è³¼</button>
                    <button class="tab-btn w-1/3 py-2 px-4 text-center font-bold text-gray-600 hover:text-emerald-600 focus:outline-none border-b-2 border-transparent hover:border-emerald-600" data-tab="tab-sroi">2. SROI è©•é‘‘</button>
                    <button class="tab-btn w-1/3 py-2 px-4 text-center font-bold text-gray-600 hover:text-emerald-600 focus:outline-none border-b-2 border-transparent hover:border-emerald-600" data-tab="tab-project">3. å°ˆæ¡ˆæ¡è³¼</button>
                </div>
            </div>
            
            <!-- 1. ç¶ è‰²æ¡è³¼ Tab -->
            <div id="tab-green-procure" class="tab-content block">
                <div class="green-calc-section">
                    <div class="mb-3"><label class="block text-sm font-medium text-gray-700 mb-1">æ¨™ç« é¡å‹:</label><select id="green-label-select" class="w-full p-2 border rounded-md"><option value="Organic">æœ‰æ©Ÿè¾²ç”¢å“æ¨™ç« </option><option value="TAP">ç”¢éŠ·å±¥æ­·è¾²ç”¢å“æ¨™ç« </option><option value="CAS">CASå°ç£å„ªè‰¯è¾²ç”¢å“æ¨™ç« </option><option value="QRCode">æº¯æºç”¢å“æ¨™ç¤º</option><option value="EcoLabel">å°åœ°ç¶ è‰²ç’°å¢ƒçµ¦ä»˜ç”Ÿæ…‹æ¨™ç« </option></select></div>
                    <div class="mb-3"><label class="block text-sm font-medium text-gray-700 mb-1">ç”¢å“é¡å‹:</label><select id="green-product-type" class="w-full p-2 border rounded-md"><option value="produce">è¾²ç”¢å“</option><option value="processed">åŠ å·¥é£Ÿå“</option></select></div>
                    <div class="grid grid-cols-2 gap-4 mb-4"><div><label>æ•¸é‡:</label><input type="number" id="green-qty" class="w-full p-2 border rounded-md" min="1" value="1"></div><div><label>å–®åƒ¹:</label><input type="number" id="green-price" class="w-full p-2 border rounded-md" min="0"></div></div>
                    <div class="text-right mb-4"><p class="text-lg font-bold">å°è¨ˆ: <span id="green-subtotal" class="text-emerald-600">0</span></p></div>
                    <button id="log-green-procure-btn" class="w-full px-6 py-3 bg-emerald-600 text-white font-bold rounded-lg shadow">ç™»å…¥æ¶ˆè²»é¡æŒ‰éˆ•</button>
                    <div class="mt-4 p-3 bg-emerald-50 rounded text-center"><p class="text-sm font-bold text-gray-600">æœ¬å€ç™»éŒ„ç¸½é¡</p><p id="total-green-procure-display" class="text-2xl font-bold text-emerald-800">$0</p></div>
                </div>
            </div>
            <!-- 2. SROI Tab -->
            <div id="tab-sroi" class="tab-content hidden">
                <div class="green-calc-section">
                    <div class="mb-3"><label class="block text-sm font-medium text-gray-700 mb-1">é¸æ“‡å–®ä½ (å«æ¬Šé‡):</label><select id="sroi-unit-select" class="w-full p-2 border rounded-md"><option value="1.95">æŒ‡ä»¤æ•™è‚²è¾²å ´ (195%)</option><option value="1.95">é˜¿çˆ¾å–œ (195%)</option><option value="1.58">é›¨ç¤¾å±±ä¸‹ (158%)</option><option value="1.58">æ˜æšé¤Šèœ‚ (158%)</option><option value="2.66">æ¹§å¥é…ªæ¢¨åœ’ (266%)</option><option value="3.40">æ°´é‡Œé‡Œå±±é¤æ¡Œåœ˜éšŠ (340%)</option></select></div>
                    <div class="grid grid-cols-2 gap-4 mb-4"><div><label>æ•¸é‡:</label><input type="number" id="sroi-qty" class="w-full p-2 border rounded-md" min="1" value="1"></div><div><label>å–®åƒ¹:</label><input type="number" id="sroi-price" class="w-full p-2 border rounded-md" min="0"></div></div>
                    <div class="text-right mb-4"><p>SROI åƒ¹å€¼å°è¨ˆ: <span id="sroi-subtotal" class="text-emerald-600">0</span></p></div>
                    <button id="log-sroi-btn" class="w-full px-6 py-3 bg-emerald-600 text-white font-bold rounded-lg shadow">ç™»å…¥æ¶ˆè²»é¡æŒ‰éˆ•</button>
                    <div class="mt-4 p-3 bg-emerald-50 rounded text-center"><p class="text-sm font-bold text-gray-600">æœ¬å€ç™»éŒ„ç¸½é¡</p><p id="total-sroi-display" class="text-2xl font-bold text-emerald-800">$0</p></div>
                </div>
            </div>
            <!-- 3. å°ˆæ¡ˆæ¡è³¼ Tab -->
            <div id="tab-project" class="tab-content hidden">
                <div class="green-calc-section">
                     <div id="project-password-section" class="mb-4"><label class="block text-sm font-medium text-gray-700 mb-1">è«‹è¼¸å…¥å°ˆæ¡ˆå¯†ç¢¼:</label><div class="flex gap-2"><input type="password" id="project-password" class="w-full p-2 border rounded-md"><button id="unlock-project-btn" class="px-4 py-2 bg-gray-600 text-white rounded">è§£é–</button></div><p id="password-msg" class="text-xs text-red-500 mt-1"></p></div>
                     <div id="project-entry-section" class="hidden">
                        <div class="mb-3"><label>å°ˆæ¡ˆèªªæ˜:</label><input type="text" id="project-desc" class="w-full p-2 border rounded-md"></div>
                        <div class="mb-4"><label>æ¶ˆè²»é‡‘é¡:</label><input type="number" id="project-amount" class="w-full p-2 border rounded-md"></div>
                        <button id="log-project-btn" class="w-full px-6 py-3 bg-emerald-600 text-white font-bold rounded-lg shadow">ç™»å…¥å°ˆæ¡ˆæ¶ˆè²»é‡‘é¡</button>
                    </div>
                    <div class="mt-4 p-3 bg-emerald-50 rounded text-center"><p class="text-sm font-bold text-gray-600">æœ¬å€ç™»éŒ„ç¸½é¡</p><p id="total-project-display" class="text-2xl font-bold text-emerald-800">$0</p></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- POI Modal, Activity Modal, THSR, Log Trip, Taxi, SROI, Market, Photo Modals (Simplified for brevity but functionally present) -->
    <div id="poi-modal" class="modal-overlay hidden"><div class="modal-content shadow-xl"><span class="close-button">Ã—</span><h3 id="poi-modal-title" class="text-2xl font-bold mb-4 text-green-800"></h3><img id="poi-modal-image" class="mb-4 hidden w-full h-48 object-cover rounded-md"><div class="poi-modal-content-body"><p id="poi-modal-description" class="text-gray-700 leading-relaxed"></p><p id="poi-modal-coordinates" class="text-sm text-gray-600 mt-4"></p><div id="poi-modal-social" class="mt-4 text-sm"></div><div id="sroi-info-button-container" class="mt-6 hidden"><button id="show-sroi-info-button" class="w-full px-6 py-3 bg-purple-600 text-white font-bold rounded-lg shadow">SROIç”Ÿæ…‹æ£²åœ°è¾²ç”¢å“è¨‚è³¼</button></div><div id="poi-modal-dynamic-buttons" class="mt-6 space-y-3"></div></div><div id="poi-review-section" class="hidden mt-6 pt-4 border-t border-gray-200"><h4 class="text-lg font-medium mb-3 text-gray-600">æ°¸çºŒæ¶ˆè²»å¯©æ ¸</h4><input type="number" id="consumption-amount" class="w-full p-2 border rounded-md mb-3" placeholder="æ¶ˆè²»é‡‘é¡"><input type="text" id="review-code" class="w-full p-2 border rounded-md mb-4" placeholder="å¯©æ ¸ç¢¼"><button id="submit-poi-review" class="px-6 py-3 bg-green-600 text-white rounded-lg shadow">æäº¤å¯©æ ¸</button><p id="poi-review-status" class="mt-3 text-sm font-semibold text-gray-600"></p></div><div class="mt-6 flex justify-end space-x-4"><button id="set-as-start-button" class="px-6 py-3 bg-yellow-500 text-white rounded-lg">è¨­å®šç‚ºèµ·é»</button><button id="set-as-end-button" class="px-6 py-3 bg-emerald-500 text-white rounded-lg">è¨­å®šç‚ºçµ‚é»</button></div></div></div>
    <div id="log-trip-modal" class="modal-overlay hidden"><div class="modal-content shadow-xl"><span class="close-button">Ã—</span><h3 class="text-2xl font-bold mb-4 text-orange-700">è¨˜éŒ„æ—…ç¨‹</h3><p>å‰å¾€ï¼š<span id="log-trip-poi-name" class="font-bold"></span></p><div id="log-trip-transport-options" class="flex flex-wrap gap-3 my-4"></div><input type="number" id="log-trip-mileage" class="w-full p-3 border rounded-md mb-4" placeholder="è¼¸å…¥é‡Œç¨‹ (km)"><button id="submit-log-trip" class="w-full px-8 py-4 bg-orange-600 text-white font-bold rounded-lg shadow">è¨˜éŒ„</button><p id="log-trip-status" class="mt-3 text-sm text-center"></p></div></div>
    <div id="market-selection-modal" class="modal-overlay hidden"><div class="modal-content shadow-xl"><span class="close-button">Ã—</span><h3 class="text-2xl font-bold mb-6 text-purple-700 text-center">åœ°ç”¢åœ°éŠ·</h3><div id="market-type-selection-step"><div id="market-type-options" class="grid grid-cols-1 gap-4"></div></div><div id="product-type-selection-step" class="hidden"><p class="mb-3">åœ¨ <span id="selected-market-type-display" class="font-bold text-purple-600"></span> æ¶ˆè²»äº†ï¼š</p><div id="product-type-options" class="space-y-3 mb-4"></div><input id="market-store-code" class="w-full p-3 border rounded-md mb-4" placeholder="å•†åº—ç¢¼"><button id="submit-market-activity-button" class="w-full bg-purple-600 text-white py-3 rounded-lg font-bold">è¨˜éŒ„</button><button id="back-to-market-type-button" class="mt-2 w-full bg-gray-300 py-3 rounded-lg font-bold">è¿”å›</button></div><p id="market-activity-status" class="mt-3 text-center"></p></div></div>
    <div id="photo-album-modal" class="modal-overlay hidden"><div class="modal-content shadow-xl"><span class="close-button">Ã—</span><h3 class="text-2xl font-bold mb-4 text-teal-700">ç›¸ç°¿</h3><ul class="space-y-2"><li><a href="#" class="text-blue-600 hover:underline">å°è¾²éŠç¨‹</a></li><li><a href="#" class="text-blue-600 hover:underline">ç”Ÿæ…‹æ—…éŠ</a></li><li><a href="https://photos.google.com/share/AF1QipN86zQIAJaA-HyNbExPBNARmU7VT1eEOS2JNsjAC1VfonWpOT5zDAwIVwbueSdfWQ?key=NlN1NlVVS0tZdWhiRV9HYnlsSnNsV0VXVHN5YVJR" target="_blank" class="text-blue-600 hover:underline">æ˜Ÿå…‰å¸‚é›†</a></li></ul></div></div>
    <div id="thsr-info-modal" class="modal-overlay hidden"><div class="modal-content shadow-xl"><span class="close-button">Ã—</span><h3 class="text-2xl font-bold mb-4 text-blue-800">é«˜éµå‡æœŸ</h3><p>è«‹åƒè€ƒå®˜æ–¹ç¶²ç«™è³‡è¨Šã€‚</p></div></div>
    <div id="taxi-info-modal" class="modal-overlay hidden"><div class="modal-content shadow-xl"><span class="close-button">Ã—</span><h3 class="text-2xl font-bold mb-4 text-yellow-700">è¨ˆç¨‹è»Šè³‡è¨Š</h3><p>é ç´„é›»è©±: 0980-015-339</p></div></div>
    <div id="sroi-info-modal" class="modal-overlay hidden"><div class="modal-content shadow-xl"><span class="close-button">Ã—</span><h3 class="text-2xl font-bold mb-4 text-purple-700">SROI è³‡è¨Š</h3><p id="sroi-modal-poi-name" class="font-bold mb-2"></p><div id="sroi-modal-content-body"></div></div></div>
    <div id="activity-modal" class="modal-overlay hidden"><div class="modal-content shadow-xl"><span class="close-button">Ã—</span><h3 class="text-2xl font-bold mb-4 text-green-800">æ´»å‹•</h3><img id="activity-modal-image" class="hidden"><input id="verification-code-input" class="w-full p-3 border rounded-md mb-3" placeholder="é©—è­‰ç¢¼"><textarea id="activity-content-input" class="w-full p-3 border rounded-md mb-3" placeholder="å…§å®¹"></textarea><button id="submit-activity-log" class="w-full bg-green-600 text-white py-3 rounded-lg font-bold">é€å‡º</button><p id="activity-log-status" class="mt-3 text-center"></p></div></div>

</body>
</html>
